<template name="player">
  <section class="player">
    {{#if $.Session.get 'isPlaying'}}
    {{#with playing}}
      {{#if gameSrc}}
      <iframe id="player" class="player" src="{{gameSrc}}" frameborder="0"></iframe>
      {{else}}
      <div class="playerMasthead">
        <div class="playerMastheadInfo">
          <div class="playerMastheadInfoContent">
            <div class="playerMastheadIcon">{{icon 'shock'}}</div>
            <div class="playerMastheadTitle">Awww.</div>
            <div class="playerMastheadSubtitle">
              {{#with getUserById owner}}{{username}}{{/with}} hasn't uploaded a version of {{title}} for you to play yet. Perhaps you could give them some love by
              <a class="playerMastheadLink" data-action="toggleOverlay">supporting their game?</a>
            </div>
          </div>
        </div>
      </div>
      {{/if}}
    {{/with}}
    {{else}}
    <div class="playerMasthead">
      <div class="playerMastheadInfo">
        <div class="playerMastheadInfoContent">
          <div class="playerMastheadIcon">{{icon 'no'}}</div>
          <div class="playerMastheadTitle">Whoa There!</div>
          <div class="playerMastheadSubtitle">
            You don't have any games playing. Perhaps you'd like to give
            {{#with randomGame}}
              <a href="/users/{{owner}}/{{_id}}/community" class="playerMastheadLink" data-action="toggleOverlay">{{title}}</a>
            {{/with}}
            a try?
          </div>
        </div>
      </div>
    </div>
    {{/if}}

    <a data-action="toggleOverlay" class="logo white">
      <div class="logoIcon">{{icon 'cinder'}}</div>
      <div class="logoText">Cinder</div>
    </a>

    <div class="playerControls">
      <div data-action="toggleOverlay" data-hidden="{{$.Session.equals 'overlayHidden' true}}" class="control play">{{icon 'play'}}</div>
      <div data-action="toggleOverlay" data-hidden="{{$.Session.equals 'overlayHidden' false}}" class="control pause">{{icon 'pause'}}</div>
      {{#with hidden}}
      <div class="time">3:20</div>
      <div class="sliderWrapper progress">
        <div class="slider">
          <div class="track">
            <div class="bar">
              <div class="handle"></div>
            </div>
          </div>
        </div>
      </div>
      <div class="duration">4:00</div>
      <div class="volumeIcon"></div>
      <div class="sliderWrapper volume">
        <div class="slider">
          <div class="track">
            <div class="bar">
              <div class="handle"></div>
            </div>
          </div>
        </div>
      </div>
      <div class="enterFullscreen"></div>
      <div class="exitFullscreen"></div>
      {{/with}}
    </div>
  </section>
</template>