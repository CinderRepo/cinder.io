<template name="main">
	<section id="container" data-state="{{state}}" data-modal="{{modalState}}">
		{{#isolate}}
		<div id="welcome">
			<div id="notifyWrapper">
				{{>cinderIcon}}
				<h1 id="title">cinder.<strong>io</strong></h1>
				<div id="greeting">Cinder.io empowers developers to make the games they want, for the gamers who want to play them.</div>
				{{>modal notify}}
				{{#isolate}}
				<div id="thankyou" data-visible="{{getSession 'thankYouState'}}">Thank You. Really.</div>
				{{/isolate}}
			</div>
			<div id="particles"></div>
		</div>
		{{/isolate}}
		{{>nav}}
		{{#isolate}}
		<div id="tiles">
			<div id="tilesWrapper">
				{{!<button id="prev">Prev</button>
				<button id="next">Next</button>}}
				{{#each scrollableList}}
					{{>tile}}
				{{/each}}
			</div>
		</div>
		{{/isolate}}
		{{#isolate}}
		<div id="tilePanes">
			{{#with viewing}}
			<div id="tilePanesWrapper" data-genre="{{genre}}" data-activePane="{{activePane}}">
				{{#isolate}}
				<div class="tilePane" data-pane="info" style="background-image: url('{{previewSrc}}');">
					<div class="tilePaneInfoWrapper">
						{{>button play}}
						<div id="tilePaneName">{{name}}</div>
						<div id="tilePaneDescription">{{description}}</div>
						<div id="messages">
							<div class="messagesContainer">
							{{#isolate}}
							{{#if hasMessages}}
								{{#each messages}}
									{{>message}}
								{{/each}}
							{{else}}
								<div class="noMessagesNotice">NO MESSAGES ADDED</div>
							{{/if}}
							{{/isolate}}
							</div>
						</div>
					</div>
				</div>
				{{/isolate}}
				{{#isolate}}
				<div class="tilePane" data-pane="images">
					IMAGES!
				</div>
				{{/isolate}}
				{{#isolate}}
				<div class="tilePane" data-pane="audio">
					AUDIO!
				</div>
				{{/isolate}}
				{{#isolate}}
				<div class="tilePane" data-pane="video">
					VIDEO!
				</div>
				{{/isolate}}
				{{#isolate}}
				<div class="tilePane" data-pane="code">
					CODE!
				</div>
				{{/isolate}}
				{{#isolate}}
				<div class="tilePane" data-pane="fund">
					FUND!
				</div>
				{{/isolate}}
				{{#isolate}}
				<div class="tilePane" data-pane="play">
					<iframe id="gamePlayer" seamless allowfullscreen sandbox="allow-scripts allow-same-origin" src="{{gameSrc}}"></iframe>
				</div>
				{{/isolate}}
				{{>textEntryBox}}
			</div>
			{{/with}}
		</div>
		{{/isolate}}
	</section>
</template>