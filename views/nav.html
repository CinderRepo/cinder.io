<template name="nav">
  <div class="nav" data-state="{{state}}">
    {{#if currentUser}}
      {{#with currentUser}}
        {{#if viewing}}
          {{>circleButton exit}}
        {{else}}
          {{#if playing}}
            {{>circleButton hidden}}
          {{else}}
            {{>circleButton logout}}
          {{/if}}
        {{/if}}
        {{#if playing}}
          {{>dualButton exitGame}}
        {{else}}
          {{>dualButton loggedIn}}
        {{/if}}
        {{#if viewing}}
          {{>circleButton hidden}}
        {{else}}
          {{#if playing}}
            {{>circleButton hidden}}
          {{else}}
            {{>circleButton add}}
          {{/if}}
        {{/if}}
      {{/with}}
    {{else}}
      {{#if playing}}
        {{>dualButton exitGame}}
      {{else}}
        {{>dualButton loggedOut}}
      {{/if}}
      {{#if viewing}}
        {{>circleButton hidden}}
      {{/if}}
    {{/if}}
    {{>modal}}
  </div>
</template>